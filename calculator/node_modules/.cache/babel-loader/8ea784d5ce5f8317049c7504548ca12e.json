{"ast":null,"code":"const math = require(\"mathjs\");\n\nlet currentValue = \"\";\nlet expression = [];\nlet result = \"\";\nlet lastOperation = [];\nlet operationPressed = false;\n\nclass CalcFunctions {\n  constructor() {\n    currentValue = \"0\";\n    expression = [];\n    result = \"\";\n    lastOperation = [];\n    operationPressed = false;\n  }\n\n  getCurrentValue() {\n    return currentValue;\n  }\n\n  getExpression() {\n    return expression;\n  }\n\n  getResult() {\n    return result;\n  }\n\n  enterDigit(digit) {\n    if (currentValue == \"0\") {\n      currentValue = digit;\n    } else {\n      if (operationPressed) {\n        currentValue = digit;\n        return;\n      }\n\n      currentValue += digit;\n    }\n  }\n\n  clearEvery() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    if (expression.length == 0) {\n      this.deactiveButton();\n    }\n\n    currentValue = \"0\"; // expression = [];\n    // lastOperation = [];\n  }\n\n  percentage() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    currentValue = math.evaluate(currentValue + \" / 100\");\n  }\n\n  decimal() {\n    if (currentValue === \"\") {\n      currentValue = \"0.\";\n      return;\n    }\n\n    let lastChar = currentValue.charAt(currentValue.length - 1);\n\n    if (lastChar !== \".\") {\n      currentValue = currentValue + \".\";\n    }\n  }\n\n  plusMinus() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    if (currentValue.charAt(0) === \"-\") {\n      currentValue = currentValue.slice(1);\n    } else {\n      currentValue = \"-\" + currentValue;\n    }\n  }\n\n  add() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    expression.push(currentValue);\n    expression.push(\"+\");\n    operationPressed = true; // currentValue = \"\";\n  }\n\n  subtract() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    expression.push(currentValue);\n    expression.push(\"-\");\n    currentValue = \"\";\n  }\n\n  multiply() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    expression.push(currentValue);\n    expression.push(\"*\");\n    currentValue = \"\";\n  }\n\n  divide() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    expression.push(currentValue);\n    expression.push(\"/\");\n    currentValue = \"\";\n  }\n\n  deactiveButton() {\n    let active = document.getElementById(\"keypad\").querySelectorAll(\".active\");\n    console.log(\"active: \", active.length);\n\n    if (active.length > 0) {\n      active[0].classList.remove(\"active\");\n    }\n  }\n\n  equals() {\n    if (currentValue === \"\") {\n      return;\n    }\n\n    this.deactiveButton();\n    console.log(\"expression1\", expression); // if expression is empty\n\n    if (expression.length == 0) {\n      console.log(\"CV\", currentValue);\n      lastOperation.unshift(currentValue);\n      expression = lastOperation;\n      lastOperation = [];\n      console.log(\"expression2\", expression);\n    } else {\n      expression.push(currentValue);\n      lastOperation = [];\n    }\n\n    console.log(\"expression3\", expression);\n    const joinedExpression = expression.join(\" \");\n    result = math.evaluate(joinedExpression).toString();\n    currentValue = result;\n    let expressionLength = expression.length;\n    lastOperation.push(expression[expressionLength - 2]);\n    lastOperation.push(expression[expressionLength - 1]);\n    console.log(\"lasOperation\", lastOperation);\n    expression = [];\n  }\n\n}\n\nexport default CalcFunctions;","map":{"version":3,"sources":["C:\\Users\\zacsw\\Documents\\Projects - NoGit\\calculator\\src\\components\\calculator\\calcFunctions.js"],"names":["math","require","currentValue","expression","result","lastOperation","operationPressed","CalcFunctions","constructor","getCurrentValue","getExpression","getResult","enterDigit","digit","clearEvery","length","deactiveButton","percentage","evaluate","decimal","lastChar","charAt","plusMinus","slice","add","push","subtract","multiply","divide","active","document","getElementById","querySelectorAll","console","log","classList","remove","equals","unshift","joinedExpression","join","toString","expressionLength"],"mappings":"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","sourcesContent":["const math = require(\"mathjs\");\r\n\r\nlet currentValue = \"\";\r\nlet expression = [];\r\nlet result = \"\";\r\nlet lastOperation = [];\r\nlet operationPressed = false;\r\n\r\nclass CalcFunctions {\r\n  constructor() {\r\n    currentValue = \"0\";\r\n    expression = [];\r\n    result = \"\";\r\n    lastOperation = [];\r\n    operationPressed = false;\r\n\r\n  }\r\n\r\n  getCurrentValue() {\r\n    return currentValue;\r\n  }\r\n\r\n  getExpression() {\r\n    return expression;\r\n  }\r\n\r\n  getResult() {\r\n    return result;\r\n  }\r\n\r\n  enterDigit(digit) {\r\n    if (currentValue == \"0\") {\r\n      currentValue = digit;\r\n    }\r\n    else {\r\n      if (operationPressed) {\r\n        currentValue = digit;\r\n        return;\r\n      }\r\n      currentValue += digit;\r\n    }\r\n  }\r\n\r\n  clearEvery() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    if (expression.length == 0) {\r\n      this.deactiveButton();\r\n    }\r\n\r\n    currentValue = \"0\";\r\n\r\n\r\n    // expression = [];\r\n    // lastOperation = [];\r\n  }\r\n\r\n  percentage() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    currentValue = math.evaluate(currentValue + \" / 100\");\r\n  }\r\n\r\n  decimal() {\r\n    if (currentValue === \"\") {\r\n      currentValue = \"0.\";\r\n      return;\r\n    }\r\n\r\n    let lastChar = currentValue.charAt(currentValue.length - 1);\r\n    if (lastChar !== \".\") {\r\n      currentValue = currentValue + \".\";\r\n    }\r\n  }\r\n\r\n  plusMinus() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    if (currentValue.charAt(0) === \"-\") {\r\n      currentValue = currentValue.slice(1);\r\n    } else {\r\n      currentValue = \"-\" + currentValue;\r\n    }\r\n  }\r\n\r\n  add() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    expression.push(currentValue);\r\n    expression.push(\"+\");\r\n    operationPressed = true;\r\n    // currentValue = \"\";\r\n  }\r\n\r\n  subtract() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    expression.push(currentValue);\r\n    expression.push(\"-\");\r\n\r\n    currentValue = \"\";\r\n  }\r\n\r\n  multiply() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    expression.push(currentValue);\r\n    expression.push(\"*\");\r\n    currentValue = \"\";\r\n  }\r\n\r\n  divide() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    expression.push(currentValue);\r\n    expression.push(\"/\");\r\n    currentValue = \"\";\r\n  }\r\n\r\n  deactiveButton() {\r\n    let active = document.getElementById(\"keypad\").querySelectorAll(\".active\");\r\n    console.log(\"active: \", active.length);\r\n\r\n    if (active.length > 0) {\r\n      active[0].classList.remove(\"active\");\r\n    }\r\n  }\r\n\r\n  equals() {\r\n    if (currentValue === \"\") {\r\n      return;\r\n    }\r\n\r\n    this.deactiveButton();\r\n    console.log(\"expression1\", expression);\r\n\r\n\r\n    // if expression is empty\r\n    if (expression.length == 0) {\r\n      console.log(\"CV\", currentValue);\r\n      lastOperation.unshift(currentValue);\r\n      expression = lastOperation;\r\n      lastOperation = [];\r\n      console.log(\"expression2\", expression);\r\n\r\n    }\r\n    else {\r\n      expression.push(currentValue);\r\n      lastOperation = [];\r\n    }\r\n    console.log(\"expression3\", expression);\r\n\r\n    const joinedExpression = expression.join(\" \");\r\n\r\n    result = math.evaluate(joinedExpression).toString();\r\n    currentValue = result;\r\n\r\n    let expressionLength = expression.length;\r\n    lastOperation.push(expression[expressionLength - 2]);\r\n    lastOperation.push(expression[expressionLength - 1]);\r\n    console.log(\"lasOperation\", lastOperation);\r\n    expression = [];\r\n  }\r\n}\r\n\r\nexport default CalcFunctions;\r\n"]},"metadata":{},"sourceType":"module"}